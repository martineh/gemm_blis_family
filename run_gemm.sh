#!/bin/bash

#-------------------------------------------------------------
# Variants : example : B3A2C0(B3-->L3, A-->L2, C--> v-register)
# ORDER    : C = column major, R = row major
# TRANS    : T = transpose   , N = !T
#-------------------------------------------------------------
ORDERA=C  #R
ORDERB=C  #R
ORDERC=C  #R
TRANSA=N  #T
TRANSB=N  #T
#-------------------------------------------------------------


#-------------------------------------------------------------
# MODE Selected. [B3A2C0  | BLIS | KERNELS]  
#-------------------------------------------------------------
# [*] B3A2C0      : GEMM Family Original
# [*] B3A2C0_BLIS : GEMM Family + BLIS Micro-kernel
# [*] BLIS        : GEMM BLIS LIBRARY
# [*] KERNEL_EVAL : Kernels avaluation (Testing Mode Disabled!)
#-------------------------------------------------------------
VARIANT=B3A2C0
#-------------------------------------------------------------


#-------------------------------------------------------------
# ALPHA - BETA Fixed Values
#-------------------------------------------------------------
ALPHA=1.0   
BETA=0.0   
#-------------------------------------------------------------


#-------------------------------------------------------------
# Execution Minimum Time
#-------------------------------------------------------------
TIMIN=3.0 
#-------------------------------------------------------------


#-------------------------------------------------------------
# Enable (T) | Disable (F) Testing Mode
#-------------------------------------------------------------
TEST=T
#-------------------------------------------------------------


#-------------------------------------------------------------
# Enable (0) | Disable (1) Visual Mode
#-------------------------------------------------------------
VISUAL=0
#-------------------------------------------------------------


if $(echo $1 | grep -q "batch"); then 
	source $1
else
	source batch/null.sh
fi

taskset -c 0 ./build/test_gemm.x $VARIANT $ORDERA $ORDERB $ORDERC $TRANSA $TRANSB $ALPHA $BETA $MMIN $MMAX $MSTEP $NMIN $NMAX $NSTEP $KMIN $KMAX $KSTEP $VISUAL $TIMIN $TEST $1 $2


